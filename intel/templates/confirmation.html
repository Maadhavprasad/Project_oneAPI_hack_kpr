<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Routine Navigator</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/confirmation.css') }}"> <!-- Link to external stylesheet -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-8ovHQe38wo4dPdAyy6mlcuwQoPChUmA+P1Mv4rIzJuw38ayCPrmyHiT6EUp0y3xduB1BUIXYytH5YkU9Eykg+A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>

<!-- Timeline Page -->
<div id="timelinePage">
    <div class="container">
        <div class="timeline" id="timeline"></div>
        <div class="vision-board" id="visionBoard">
            <h2>Reason</h2>
        </div>
    </div>
</div>

<button class="back-to-top"><i class="fas fa-arrow-up"></i></button>
<div class="button">
   <center>
      <a href="{{ url_for('goal') }}">                             
      <button type="button" class="end"> Regeneration </button></a>
      <a href="{{ url_for('keypage') }}">  <!-- Updated link to keypage.html -->
         <button type="button" class="end"> Submit  </button>
      </a> 
   </center>
</div>

<script>
    const routineDict = {
        "Wake Up": ["05:30", "06:00"],
        "Exercise": ["06:30", "07:30"],
        "Breakfast": ["08:00", "08:30"],
        "Work (Morning)": ["09:00", "12:00"],
        "Lunch": ["12:30", "13:00"],
        "Work (Afternoon)": ["13:00", "17:00"],
        "Relax": ["17:30", "18:00"],
        "Dinner": ["19:00", "19:30"],
        "Leisure": ["20:00", "22:00"],
        "Sleep": ["22:30", "05:30"]
    };

    function loadTimeline() {
        const timelineContainer = document.getElementById('timeline');
        timelineContainer.innerHTML = ''; // Clear previous timeline

        // Generate HTML for user-defined timeline
        Object.entries(routineDict).forEach(([eventName, timePeriod]) => {
            const eventElement = createEventElement(eventName, `${timePeriod[0]} - ${timePeriod[1]}`);
            eventElement.onclick = () => loadVisionBoard(eventName); // Load vision board content
            timelineContainer.appendChild(eventElement);
        });
    }

    function loadVisionBoard(taskName) {
        const visionBoard = document.getElementById('visionBoard');
        visionBoard.innerHTML = `<h2>${taskName}</h2><p>This is additional information about ${taskName}.</p>`;
    }

    function createEventElement(name, time) {
        const eventElement = document.createElement('div');
        eventElement.classList.add('event');
        
        eventElement.innerHTML = `
            <h3>${name}</h3>
            <p class="time">${time}</p>
            <div class="more-details">
                <p>This is additional information about ${name}.</p>
            </div>
        `;
        return eventElement;
    }

    loadTimeline();

    // Back to top button functionality
    const backToTopButton = document.querySelector('.back-to-top');
    
    window.addEventListener('scroll', () => {
        if (window.pageYOffset > 300) {
            backToTopButton.classList.add('show');
        } else {
            backToTopButton.classList.remove('show');
        }
    });
    
    backToTopButton.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
</script>

</body>
</html>
